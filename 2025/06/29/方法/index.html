<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>方法 | Li</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="类型 定义方式 是否需要实例（self） 调用方式 作用    普通函数 fn xxx(...) ❌ 不用 self xxx(...) 全局或模块函数   方法（方法函数） fn xxx(&amp;self) ✅ 需要实例（self） 实例.xxx() 操作某个实例的行为（面向对象）   关联函数 fn xxx(...)（但在 impl 块中） ❌ 不需要 self 类型名::xxx(...">
<meta property="og:type" content="article">
<meta property="og:title" content="方法">
<meta property="og:url" content="http://example.com/2025/06/29/%E6%96%B9%E6%B3%95/index.html">
<meta property="og:site_name" content="Li">
<meta property="og:description" content="类型 定义方式 是否需要实例（self） 调用方式 作用    普通函数 fn xxx(...) ❌ 不用 self xxx(...) 全局或模块函数   方法（方法函数） fn xxx(&amp;self) ✅ 需要实例（self） 实例.xxx() 操作某个实例的行为（面向对象）   关联函数 fn xxx(...)（但在 impl 块中） ❌ 不需要 self 类型名::xxx(...">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-06-29T08:11:03.000Z">
<meta property="article:modified_time" content="2025-06-29T08:14:55.493Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Rust">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Li" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Li</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-方法" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/29/%E6%96%B9%E6%B3%95/" class="article-date">
  <time class="dt-published" datetime="2025-06-29T08:11:03.000Z" itemprop="datePublished">2025-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      方法
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <table>
<thead>
<tr>
<th>类型</th>
<th>定义方式</th>
<th>是否需要实例（self）</th>
<th>调用方式</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>普通函数</td>
<td><code>fn xxx(...)</code></td>
<td>❌ 不用 <code>self</code></td>
<td><code>xxx(...)</code></td>
<td>全局或模块函数</td>
</tr>
<tr>
<td>方法（方法函数）</td>
<td><code>fn xxx(&amp;self)</code></td>
<td>✅ 需要实例（self）</td>
<td><code>实例.xxx()</code></td>
<td>操作某个实例的行为（面向对象）</td>
</tr>
<tr>
<td>关联函数</td>
<td><code>fn xxx(...)</code>（但在 impl 块中）</td>
<td>❌ 不需要 <code>self</code></td>
<td><code>类型名::xxx(...)</code></td>
<td>属于类型，但不需要对象</td>
</tr>
</tbody></table>
<h3 id="普通函数（function）"><a href="#普通函数（function）" class="headerlink" title="普通函数（function）"></a>普通函数（function）</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">printPet</span>(name: Pets) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Pet is &#123;:?&#125;&quot;</span>, name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>是全局函数</li>
<li>跟类型 <code>Pets</code> 没关系</li>
<li>调用时直接用 <code>printPet(...)</code></li>
</ul>
<h3 id="方法（method）"><a href="#方法（method）" class="headerlink" title="方法（method）"></a>方法（method）</h3><p>定义在 <code>impl</code> 块中，并且有 <code>&amp;self</code>：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    name: <span class="type">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">say_hi</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Hi, 我是 &#123;&#125;&quot;</span>, <span class="keyword">self</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p</span> = Person &#123;</span><br><span class="line">        name: <span class="string">&quot;小明&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    p.<span class="title function_ invoke__">say_hi</span>(); <span class="comment">// ⬅️ 调用方法时，自动把 p 作为 &amp;self 传进去</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>&amp;self</code> 表示这个方法作用在某个具体的实例上</li>
</ul>
<p>这行</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_ invoke__">say_hi</span>();</span><br></pre></td></tr></table></figure>

<p>等价于下面这行 <strong>真实的传参方式</strong>：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person::<span class="title function_ invoke__">say_hi</span>(&amp;p);</span><br></pre></td></tr></table></figure>

<p>&amp;self 其实就是 &amp;p</p>
<h3 id="关联函数（associated-function）"><a href="#关联函数（associated-function）" class="headerlink" title="关联函数（associated function）"></a>关联函数（associated function）</h3><p> 定义在 <code>impl</code> 块中，但没有 <code>self</code> 参数：  </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    radius: <span class="type">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="comment">// 关联函数（构造器）</span></span><br><span class="line">    <span class="comment">// new是Circle的关联函数，因为它的第一个参数不是self，且new并不是关键字</span></span><br><span class="line">    <span class="comment">// 这种方法往往用于初始化当前结构体的实例</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(radius: <span class="type">f64</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123; radius &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法（需要实例）</span></span><br><span class="line">    <span class="comment">// Circle的方法，&amp;self表示借用当前的Circle结构体</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">area</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">        <span class="number">3.14</span> * <span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">c</span> = Circle::<span class="title function_ invoke__">new</span>(<span class="number">2.0</span>);   <span class="comment">// 调用关联函数</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;面积是 &#123;&#125;&quot;</span>, c.<span class="title function_ invoke__">area</span>()); <span class="comment">// 调用方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>没有 <code>self</code>，代表这个函数<strong>和实例没关系</strong></li>
<li>调用方式是通过类型名：<code>Pets::print(&amp;dog)</code></li>
</ul>
<p>可以把它想象成 Java&#x2F;C++&#x2F;Python 中的 “静态方法”。</p>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ol>
<li>普通函数不进 impl，哪里都能调；</li>
<li>方法必须有 self，用对象来调；</li>
<li>关联函数无 self，用类型来找。</li>
<li><code>impl 块</code> 中的名称，必须是你要给它实现方法的类型名。如果你想给 <code>Person</code> 类型添加方法，那 <code>impl</code> 后面就必须写 <code>Person</code>。</li>
</ol>
<h3 id="self、-self-和-mut-self"><a href="#self、-self-和-mut-self" class="headerlink" title="self、&amp;self 和 &amp;mut self"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/method.html#selfself-%E5%92%8C-mut-self"><font style="color:rgb(0, 0, 0);">self、&amp;self 和 &amp;mut self</font></a></h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    width: <span class="type">u32</span>,</span><br><span class="line">    height: <span class="type">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">area</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u32</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width * <span class="keyword">self</span>.height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123; width: <span class="number">30</span>, height: <span class="number">50</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;The area of the rectangle is &#123;&#125; square pixels.&quot;</span>,</span><br><span class="line">        rect1.<span class="title function_ invoke__">area</span>()</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>self</code><font style="color:rgb(0, 0, 0);"> 表示 </font><code>Rectangle</code><font style="color:rgb(0, 0, 0);"> 的所有权转移到该方法中，这种形式用的较少</font></li>
<li><code>&lt;&amp;self</code><font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">表示该方法对</font><font style="color:rgb(0, 0, 0);"> </font><code>Rectangle</code><font style="color:rgb(0, 0, 0);"> </font><font style="color:rgb(0, 0, 0);">的不可变借用</font></li>
<li><code>&amp;mut self</code><font style="color:rgb(0, 0, 0);"> 表示可变借用</font></li>
<li><code>Self</code><font style="color:rgb(0, 0, 0);"> 指代被实现方法的结构体类型</font></li>
</ul>
<h3 id="方法名跟结构体字段名相同"><a href="#方法名跟结构体字段名相同" class="headerlink" title="方法名跟结构体字段名相同"></a>方法名跟结构体字段名相同</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">width</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(width:<span class="type">u32</span>,height:<span class="type">u32</span>)<span class="punctuation">-&gt;</span><span class="keyword">Self</span>&#123;</span><br><span class="line">        Rectangle&#123;width,height&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123;</span><br><span class="line">        width: <span class="number">30</span>,</span><br><span class="line">        height: <span class="number">50</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> rect1.<span class="title function_ invoke__">width</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;The rectangle has a nonzero width; it is &#123;&#125;&quot;</span>, rect1.width);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font style="color:rgb(0, 0, 0);">使用 </font><code>rect1.width()</code><font style="color:rgb(0, 0, 0);"> 时，Rust 知道我们调用的是它的方法，如果使用 </font><code>rect1.width</code><font style="color:rgb(0, 0, 0);">，则是访问它的字段</font></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/29/%E6%96%B9%E6%B3%95/" data-id="cmclplgtc000g6kqwdl5ycgql" data-title="方法" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2025/06/30/%E6%B3%9B%E5%9E%8B/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          泛型
        
      </div>
    </a>
  
  
    <a href="/2025/06/28/%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">模式匹配</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Rust/" style="font-size: 20px;">Rust</a> <a href="/tags/%E5%85%B6%E4%BB%96/" style="font-size: 10px;">其他</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">July 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">June 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/07/02/%E9%9B%86%E5%90%88/">集合</a>
          </li>
        
          <li>
            <a href="/2025/07/01/%E7%89%B9%E5%BE%81/">特征</a>
          </li>
        
          <li>
            <a href="/2025/06/30/%E6%B3%9B%E5%9E%8B/">泛型</a>
          </li>
        
          <li>
            <a href="/2025/06/29/%E6%96%B9%E6%B3%95/">方法</a>
          </li>
        
          <li>
            <a href="/2025/06/28/%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/">模式匹配</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>