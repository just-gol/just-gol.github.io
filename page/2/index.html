<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Li</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Li">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Li">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Li" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Li</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-数组切片" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/24/%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87/" class="article-date">
  <time class="dt-published" datetime="2025-06-24T06:41:10.000Z" itemprop="datePublished">2025-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/24/%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87/">数组切片</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><ul>
<li><font style="color:rgb(0, 0, 0);">长度固定</font></li>
<li><font style="color:rgb(0, 0, 0);">元素必须有相同的类型</font></li>
<li><font style="color:rgb(0, 0, 0);">依次线性排列</font></li>
</ul>
<p><font style="color:rgb(0, 0, 0);">这里说的数组是 Rust 的基本类型，是固定长度的，这点与其他编程语言不同，其它编程语言的数组往往是可变长度的，与 Rust 中的动态数组 </font><code>Vecto</code><font style="color:rgb(0, 0, 0);"> 类似</font></p>
<h4 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a><font style="color:rgb(0, 0, 0);">创建数组</font></h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="数组声明类型"><a href="#数组声明类型" class="headerlink" title="数组声明类型"></a><font style="color:rgb(0, 0, 0);">数组声明类型</font></h5><p><code>i32</code><font style="color:rgb(0, 0, 0);"> 是元素类型，分号后面的数字 </font><code>5</code><font style="color:rgb(0, 0, 0);"> 是数组长度</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">3</span>; <span class="number">5</span>];</span><br></pre></td></tr></table></figure>

<p><code>[3; 5]</code><font style="color:rgb(0, 0, 0);"> 和 </font><code>[类型; 长度]</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">3</span>; <span class="number">5</span>];</span><br></pre></td></tr></table></figure>

<h3 id="数组切片"><a href="#数组切片" class="headerlink" title="数组切片"></a>数组切片</h3><p><font style="color:rgb(0, 0, 0);">许你引用集合中的部分连续片段，而不是整个集合，对于数组也是，数组切片允许我们引用数组的一部分：</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span>: [<span class="type">i32</span>; <span class="number">5</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span>: &amp;[<span class="type">i32</span>] = &amp;a[<span class="number">1</span>..<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert_eq!</span>(slice, &amp;[<span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/24/%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87/" data-id="cmconx2qk000gicqw11mzfkwd" data-title="数组切片" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-所有权和借用" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/23/%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E5%80%9F%E7%94%A8/" class="article-date">
  <time class="dt-published" datetime="2025-06-23T07:23:00.000Z" itemprop="datePublished">2025-06-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/23/%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E5%80%9F%E7%94%A8/">所有权和借用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="所有权"><a href="#所有权" class="headerlink" title="所有权"></a>所有权</h3><h4 id="所有权的原则"><a href="#所有权的原则" class="headerlink" title="所有权的原则"></a>所有权的原则</h4><ol>
<li><font style="color:rgb(0, 0, 0);">Rust 中每一个值都被一个变量所拥有，该变量被称为值的所有者</font></li>
<li><font style="color:rgb(0, 0, 0);">一个值同时只能被一个变量所拥有，或者说一个值只能拥有一个所有者</font></li>
<li><font style="color:rgb(0, 0, 0);">当所有者（变量）离开作用域范围时，这个值将被丢弃(drop)</font></li>
</ol>
<h4 id="转移所有权"><a href="#转移所有权" class="headerlink" title="转移所有权"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/ownership.html#%E8%BD%AC%E7%A7%BB%E6%89%80%E6%9C%89%E6%9D%83"><font style="color:rgb(0, 0, 0);">转移所有权</font></a></h4><p>该段代码是通过<font style="color:#DF2A3F;">自动拷贝</font>的方式来赋值,都被存在栈中,不需要堆上分配内存;因此不需要所有权转移</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = x;</span><br></pre></td></tr></table></figure>

<h4 id="String"><a href="#String" class="headerlink" title="String"></a>String</h4><blockquote>
<p>回忆:当初接触 Java 的时候也觉得 String 好难,数不清的 api 要熟悉</p>
</blockquote>
<p><font style="color:rgb(0, 0, 0);"><code>String</code> 类型是一个复杂类型，由存储在栈中的</font><strong><font style="color:rgb(0, 0, 0);">堆指针</font></strong><font style="color:rgb(0, 0, 0);">、</font><strong><font style="color:rgb(0, 0, 0);">字符串长度</font></strong><font style="color:rgb(0, 0, 0);">、</font><strong><font style="color:rgb(0, 0, 0);">字符串容量</font></strong><font style="color:rgb(0, 0, 0);">共同组成，其中</font><strong><font style="color:rgb(0, 0, 0);">堆指针</font></strong><font style="color:rgb(0, 0, 0);">是最重要的，它指向了真实存储字符串内容的堆内存，至于长度和容量;：容量是堆内存分配空间的大小，长度是目前已经使用的大小</font></p>
<h5 id="String-是堆分配的拥有所有权的类型"><a href="#String-是堆分配的拥有所有权的类型" class="headerlink" title="String 是堆分配的拥有所有权的类型"></a>String 是堆分配的拥有所有权的类型</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s2</span> = s1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, world!&quot;</span>, s1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>String::from(“hello”) 创建了一个堆分配的字符串，s1 是它的所有者。</li>
<li>s2 &#x3D; s1; 是<strong>所有权的转移（move）</strong>，s1 被“搬走”，不再有效。</li>
<li>所以再使用 s1 会报错，因为 Rust 不允许使用已经失效的所有权变量。</li>
</ul>
<h5 id="str-是不可变引用（指向静态内存）"><a href="#str-是不可变引用（指向静态内存）" class="headerlink" title="&amp;str 是不可变引用（指向静态内存）"></a>&amp;str 是不可变引用（指向静态内存）</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span>: &amp;<span class="type">str</span> = <span class="string">&quot;hello, world&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = x;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;,&#123;&#125;&quot;</span>,x,y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解释：</p>
<ul>
<li>“hello, world” 是一个 字符串字面量，类型是 &amp;’static str，保存在 只读内存区域。</li>
<li>x 是这个字符串的不可变引用。</li>
<li>y &#x3D; x 只是复制了引用（指针地址），没有所有权的转移。</li>
<li>所以 x 和 y 都可以继续使用。</li>
</ul>
<p>&amp;’static str</p>
<ul>
<li>指向一段只读 UTF-8 字符串的不可变引用</li>
<li>这段内存由编译器在程序编译时分配，永远不会释放</li>
<li>所以你不需要也不能管理它的生命周期</li>
</ul>
<h6 id="为什么-str-不会转移所有权"><a href="#为什么-str-不会转移所有权" class="headerlink" title="** 为什么 &amp;str 不会转移所有权 **"></a>** 为什么 <code>&amp;str</code> 不会转移所有权 **</h6><p>因为它只是一个“只读指针”，不拥有真正的内存块。</p>
<ul>
<li>所有权概念只适用于拥有堆内存的数据，如 <code>String</code>、<code>Vec</code>。</li>
<li><code>&amp;str</code> 只是“看一下”而已，Rust 编译器不认为你把东西“搬走”了，所以不会触发 <code>move</code>。</li>
</ul>
<h5 id="String-vs-str"><a href="#String-vs-str" class="headerlink" title="String vs &amp;str"></a>String vs &amp;str</h5><table>
<thead>
<tr>
<th>表达式</th>
<th>类型</th>
<th>存储位置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>&quot;hello, world&quot;</code></td>
<td><code>&amp;&#39;static str</code></td>
<td>编译期静态内存</td>
<td><code>&amp;str</code> 是借用的字符串切片（引用），而不是拥有内存的字符串</td>
</tr>
<tr>
<td><code>String::from(&quot;hello&quot;)</code></td>
<td><code>String</code></td>
<td>堆（heap）</td>
<td>是一个 拥有所有权的动态字符串对象</td>
</tr>
</tbody></table>
<ul>
<li>String 就像一个拥有自己“内存”的包裹（盒子），里面装的是字符数组。</li>
<li>&amp;str 就像是从这个包裹里“拆出”一块标签，指向这段字符数据。</li>
<li>你不能直接用一个包裹当作标签，得“打开”它，拿出标签（即 &amp;string）。</li>
</ul>
<h6 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h6><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s_slice</span>: &amp;<span class="type">str</span> = &amp;s;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>s</code> 拥有堆上的字符串 <code>&quot;hello&quot;</code></li>
<li><code>s_slice</code> 只是“借用”了 <code>s</code> 的一部分或者全部</li>
<li>不会发生所有权转移</li>
<li><code>s</code> 和 <code>s_slice</code> 可以同时使用（因为 <code>&amp;str</code> 是不可变引用）</li>
</ul>
<h5 id="克隆-深拷贝"><a href="#克隆-深拷贝" class="headerlink" title="克隆(深拷贝)"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/ownership.html#%E5%85%8B%E9%9A%86%E6%B7%B1%E6%8B%B7%E8%B4%9D"><font style="color:rgb(0, 0, 0);">克隆(深拷贝)</font></a></h5><p><font style="color:rgb(0, 0, 0);">Rust 永远也不会自动创建数据的 “深拷贝”任何</font><strong><font style="color:rgb(0, 0, 0);">自动</font></strong><font style="color:rgb(0, 0, 0);">的复制都不是深拷贝，可以被认为对运行时性能影响较小。</font></p>
<p><font style="color:rgb(0, 0, 0);">深拷贝使用<code>clone</code></font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;s1 = &#123;&#125;, s2 = &#123;&#125;&quot;</span>, s1, s2);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="拷贝-浅拷贝-浅拷贝"><a href="#拷贝-浅拷贝-浅拷贝" class="headerlink" title="拷贝(浅拷贝)浅拷贝"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/ownership.html#%E6%8B%B7%E8%B4%9D%E6%B5%85%E6%8B%B7%E8%B4%9D"><font style="color:rgb(0, 0, 0);">拷贝(浅拷贝)</font></a><font style="color:rgb(0, 0, 0);">浅拷贝</font></h5><p><font style="color:rgb(0, 0, 0);">只发生在栈上，因此性能很高，在日常编程中，浅拷贝无处不在;</font><font style="color:rgb(0, 0, 0);">叫做 <code>copy</code> 的特征</font></p>
<p><font style="color:rgb(0, 0, 0);">任何基本类型的组合可以</font><code>copy</code>不需要分配内存或某种形式资源的类型是可以 <code>copy</code> 的</p>
<p><font style="color:rgb(0, 0, 0);">不可变引用 </font><code>&amp;T</code><font style="color:rgb(0, 0, 0);">可变引用 </font><code>&amp;mut T</code><font style="color:rgb(0, 0, 0);"> 是不可以 Copy 的</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = x;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;x = &#123;&#125;, y = &#123;&#125;&quot;</span>, x, y);</span><br></pre></td></tr></table></figure>

<h5 id="函数传值与返回"><a href="#函数传值与返回" class="headerlink" title="函数传值与返回"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/ownership.html#%E5%87%BD%E6%95%B0%E4%BC%A0%E5%80%BC%E4%B8%8E%E8%BF%94%E5%9B%9E"><font style="color:rgb(0, 0, 0);">函数传值与返回</font></a></h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="variable">a</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> <span class="variable">b</span> = <span class="number">123</span>;</span><br><span class="line">  <span class="title function_ invoke__">str</span>(a);</span><br><span class="line">  <span class="title function_ invoke__">copy</span>(b);</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a); <span class="comment">// 这行会报错出a离开str作用域就会drop</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">str</span>(some_string: <span class="type">String</span>)&#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, some_string)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">copy</span>(some_integer: <span class="type">i32</span>)&#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, some_integer)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="as-bytes-和-into-bytes"><a href="#as-bytes-和-into-bytes" class="headerlink" title="as_bytes 和 into_bytes"></a>as_bytes 和 into_bytes</h5><p>into_bytes</p>
<ul>
<li>返回值类型是：<code>Vec&lt;u8&gt;</code> → 一个新的字节数组，拥有堆内存</li>
<li>转移了 <code>String</code> 的所有权，<code>s</code> 不再可用</li>
<li>创建新对象并返回，可随意修改</li>
</ul>
<p>as_bytes()</p>
<ul>
<li>返回值类型是：<code>&amp;[u8]</code> → 字节切片的引用</li>
<li>是对 <code>String</code> 中底层数据的 不可变借用</li>
<li>不创建新数据、不移动内存</li>
<li>快速、安全</li>
<li>不能修改返回的字节数组</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="comment">// as_bytes 不转移所有权</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = s.<span class="title function_ invoke__">as_bytes</span>();         <span class="comment">// a: &amp;[u8]</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, a);          <span class="comment">// 输出: [104, 101, 108, 108, 111]</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, s);            <span class="comment">// ✅ s 还能用</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// into_bytes 会转移所有权</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = s.<span class="title function_ invoke__">into_bytes</span>();       <span class="comment">// b: Vec&lt;u8&gt;</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, b);          <span class="comment">// 输出: [104, 101, 108, 108, 111]</span></span><br><span class="line">    <span class="comment">// println!(&quot;&#123;&#125;&quot;, s);         // ❌ 编译错误：s 已被 move</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>方法</th>
<th>返回类型</th>
<th>是否消耗 <code>String</code> 所有权</th>
<th>是否分配新内存</th>
<th>是否可修改</th>
</tr>
</thead>
<tbody><tr>
<td><code>as_bytes()</code></td>
<td><code>&amp;[u8]</code>（字节切片引用）</td>
<td>❌ 否（只是借用）</td>
<td>❌ 否</td>
<td>❌ 不可修改</td>
</tr>
<tr>
<td><code>into_bytes()</code></td>
<td><code>Vec&lt;u8&gt;</code>（堆分配的字节数组）</td>
<td>✅ 是（移动所有权）</td>
<td>✅ 是</td>
<td>✅ 可修改</td>
</tr>
</tbody></table>
<p>只看不动用 <code>as_bytes()</code>，要改要带走用 <code>into_bytes()</code></p>
<h5 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = (<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>), <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;world&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// fill the blanks</span></span><br><span class="line">    <span class="keyword">let</span> (<span class="keyword">ref</span> s1, <span class="keyword">ref</span> s2) = t;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;, &#123;:?&#125;, &#123;:?&#125;&quot;</span>, s1, s2, t); <span class="comment">// -&gt; &quot;hello&quot;, &quot;world&quot;, (&quot;hello&quot;, &quot;world&quot;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> (<span class="keyword">ref</span> s1, <span class="keyword">ref</span> s2) = t</span><br></pre></td></tr></table></figure>

<p>这行代码的意思是我不要把 <code>t</code> 拆开并移动（move）里面的两个 <code>String</code>，而是想用引用的方式借用它们，让 <code>s1</code> 和 <code>s2</code> 是两个 <code>&amp;String</code> 类型的引用。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t ----------<span class="punctuation">-&gt;</span> (<span class="title function_ invoke__">String</span>(<span class="string">&quot;hello&quot;</span>), <span class="title function_ invoke__">String</span>(<span class="string">&quot;world&quot;</span>))</span><br><span class="line">                |              |</span><br><span class="line">               <span class="keyword">ref</span>            <span class="keyword">ref</span></span><br><span class="line">                |              |</span><br><span class="line">              s1: &amp;<span class="type">String</span>    s2: &amp;<span class="type">String</span></span><br></pre></td></tr></table></figure>

<h5 id="Box-和解引用操作"><a href="#Box-和解引用操作" class="headerlink" title="Box 和解引用操作 *"></a>Box<T> 和解引用操作 *</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">y</span> = <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(<span class="number">3</span>);   <span class="comment">// 关键：可变绑定！</span></span><br><span class="line"></span><br><span class="line">    *y = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">assert_eq!</span>(*x, <span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="Box-new-5-是什么意思？"><a href="#Box-new-5-是什么意思？" class="headerlink" title="Box::new(5) 是什么意思？"></a>Box::new(5) 是什么意思？</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let x = Box::new(5);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Box&lt;T&gt;</code> 是 Rust 提供的 <strong>堆分配智能指针</strong></li>
<li><code>Box::new(5)</code> 把值 <code>5</code> 放入堆内存，并返回一个指向它的 <code>Box&lt;i32&gt;</code></li>
<li><code>x</code> 现在持有这块堆内存的所有权</li>
<li>内存布局如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">栈：x ---------------&gt; 堆：[5]</span><br></pre></td></tr></table></figure>

<h6 id="✅-let-mut-y-Box-new-3-这句为什么加-mut？"><a href="#✅-let-mut-y-Box-new-3-这句为什么加-mut？" class="headerlink" title="✅ let mut y = Box::new(3); 这句为什么加 mut？"></a>✅ <code>let mut y = Box::new(3);</code> 这句为什么加 <code>mut</code>？</h6><ul>
<li><code>Box&lt;T&gt;</code> 本身是一个不可变指针（默认）</li>
<li>如果你想修改 <strong>它指向的值</strong>，就必须先让变量 <code>y</code> 是 <code>mut</code> 的</li>
<li>否则下面的 <code>*y = 4;</code> 会报错！</li>
</ul>
<h6 id="✅-y-4-是什么意思？"><a href="#✅-y-4-是什么意思？" class="headerlink" title="✅ *y = 4; 是什么意思？"></a>✅ <code>*y = 4;</code> 是什么意思？</h6><ul>
<li>这是<strong>解引用操作符</strong>，表示“访问 Box 指向的值”</li>
<li>类似于 C&#x2F;C++ 里的 <code>*ptr = 4;</code>：把指针指向的内容改成 4</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let mut y = Box::new(3); // y 指向堆中值 3</span><br><span class="line">*y = 4;                  // 把堆中的值改成 4</span><br></pre></td></tr></table></figure>

<p>执行后：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">栈：y ---------------&gt; 堆：[4]</span><br></pre></td></tr></table></figure>

<h6 id="✅-assert-eq-x-5-是什么意思？"><a href="#✅-assert-eq-x-5-是什么意思？" class="headerlink" title="✅ assert_eq!(*x, 5); 是什么意思？"></a>✅ <code>assert_eq!(*x, 5);</code> 是什么意思？</h6><ul>
<li><code>*x</code> 是解引用 <code>x</code>，拿到 <code>Box</code> 指向的值</li>
<li><code>assert_eq!</code> 用来做测试断言，验证值是否等于预期</li>
<li>本句断言：x 指向的值是 5 → ✅ 成立</li>
</ul>
<h6 id="🧠-总结"><a href="#🧠-总结" class="headerlink" title="🧠 总结"></a>🧠 总结</h6><table>
<thead>
<tr>
<th>表达式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Box::new(5)</code></td>
<td>把 5 放进堆里，并返回一个指向它的智能指针</td>
</tr>
<tr>
<td><code>let mut y</code></td>
<td>让 y 可变，这样才能通过 y 修改堆中的数据</td>
</tr>
<tr>
<td><code>*y = 4</code></td>
<td>解引用 y，修改它指向的堆内存里的值</td>
</tr>
<tr>
<td><code>*x</code></td>
<td>解引用 x，获取它指向的值</td>
</tr>
</tbody></table>
<h6 id="🧾-类比理解（Box-就像盒子）："><a href="#🧾-类比理解（Box-就像盒子）：" class="headerlink" title="🧾 类比理解（Box 就像盒子）："></a>🧾 类比理解（Box 就像盒子）：</h6><ul>
<li><code>Box::new(5)</code>：把 5 装进一个“盒子”（堆）</li>
<li><code>*x</code>：打开盒子，看到里面是 5</li>
<li><code>*y = 4</code>：打开盒子，把 3 换成 4</li>
</ul>
<h3 id="引用与借用"><a href="#引用与借用" class="headerlink" title="引用与借用"></a>引用与借用</h3><p><font style="color:rgb(0, 0, 0);">Rust 能否像其它编程语言一样，使用某个变量的指针或者引用呢？答案是可以</font><font style="color:rgb(0, 0, 0);">。</font><font style="color:rgb(0, 0, 0);">Rust 通过 </font><code>借用(Borrowing)</code><font style="color:rgb(0, 0, 0);"> 这个概念来达成上述的目的，</font><strong><font style="color:rgb(0, 0, 0);">获取变量的引用，称之为借用(borrowing)</font></strong><font style="color:rgb(0, 0, 0);">。正如现实生活中，如果一个人拥有某样东西，你可以从他那里借来，当使用完毕后，也必须要物归原主。</font></p>
<h4 id="引用与解引用"><a href="#引用与解引用" class="headerlink" title="引用与解引用"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/borrowing.html#%E5%BC%95%E7%94%A8%E4%B8%8E%E8%A7%A3%E5%BC%95%E7%94%A8"><font style="color:rgb(0, 0, 0);">引用与解引用</font></a></h4><p><font style="color:rgb(0, 0, 0);">常规引用是一个指针类型，指向了对象存储的内存地址。在下面代码中，我们创建一个 </font><code>i32</code><font style="color:rgb(0, 0, 0);"> 值的引用 <code>y</code>，然后使用解引用运算符来解出 </font><code>y</code><font style="color:rgb(0, 0, 0);"> 所使用的值:</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = &amp;x;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">assert_eq!</span>(<span class="number">5</span>, x);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(<span class="number">5</span>, *y);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(y, <span class="number">5</span>);     <span class="comment">// ❌ 错误：y 是 &amp;i32，5 是 i32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>变量 <code>x</code> 是一个整数，值为 5，<code>y</code> 是对 <code>x</code> 的引用。<br>要获取 <code>y</code> 指向的值，需要用 <code>*y</code> 解引用，这样才能和 5 比较。</li>
<li><strong>Rust 不允许你直接把引用（比如 <strong><code>**&amp;x**</code></strong>）和整数（比如 <strong><code>**5**</code></strong>）进行比较</strong>，因为它们是<strong>不同的类型</strong>。</li>
</ol>
<h4 id="不可变引用"><a href="#不可变引用" class="headerlink" title="不可变引用"></a>不可变引用</h4><p><font style="color:rgb(31,35,40);">通过不可变引用，可以读取数据，但不能修 改数据。一个变量可以有多个不可变引用，但不能与可变引用共存</font></p>
<p><code>&amp;s1</code><font style="color:rgb(0, 0, 0);"> 语法，我们创建了一个</font><strong><font style="color:rgb(0, 0, 0);">指向 </font></strong><code>s1</code><strong><font style="color:rgb(0, 0, 0);"> 的引用</font></strong><font style="color:rgb(0, 0, 0);">，但是并不拥有它,引用指向的值默认也是不可变的,不能对其进行修改</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">calculate_length</span>(&amp;s1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 会报错</span></span><br><span class="line"><span class="comment">//^ `s1` is a `&amp;` reference, so the data it refers to cannot be borrowed as mutable</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">calculate_length</span>(s1: &amp;<span class="type">String</span>) &#123;</span><br><span class="line">    s1.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;string&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="可变引用"><a href="#可变引用" class="headerlink" title="可变引用"></a>可变引用</h4><p><font style="color:rgb(31,35,40);">通过可变引用，可以读取和修改数据。一个变量 在某一时刻只能有一个可变引用，且不能与不可变引用共存</font></p>
<p><code>str</code><font style="color:rgb(0, 0, 0);"> 是可变类型，其次创建一个可变的引用 </font><code>&amp;mut str</code><font style="color:rgb(0, 0, 0);"> 和接受可变引用参数 </font><code>&quot;&gt;s: &amp;mut String</code><font style="color:rgb(0, 0, 0);"> 的函数</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">str</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">calculate_length</span>(&amp;<span class="keyword">mut</span> <span class="type">str</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">calculate_length</span>(s: &amp;<span class="keyword">mut</span> <span class="type">String</span>) &#123;</span><br><span class="line">    s.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;string&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="同一作用域，特定数据只能有一个可变引用"><a href="#同一作用域，特定数据只能有一个可变引用" class="headerlink" title=" 同一作用域，特定数据只能有一个可变引用"></a><font style="color:rgb(0, 0, 0);"> 同一作用域，特定数据只能有一个可变引用</font></h5><p>错误原因:你还没用完 <code>a</code>，又创建了 <code>b</code>，Rust 不知道你会不会两个同时修改 <code>x</code>，所以直接报错。</p>
<p>就像你家的一把钥匙给了哥哥还没收回来，你又给了妹妹一把 这容易出问题</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = &amp;<span class="keyword">mut</span> x;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = &amp;<span class="keyword">mut</span> x;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Rust 是聪明的，它看到你在 <code>println!(&quot;&#123;&#125;&quot;, a);</code> 之后就<strong>不再使用 <strong><code>**a**</code></strong> 了</strong>，所以就允许你创建 <code>b</code>。</p>
<p>你可以理解为：我收回了哥哥手里的钥匙（<code>a</code> 用完了），才把钥匙给了妹妹（<code>b</code>），所以是安全的。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = &amp;<span class="keyword">mut</span> x;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = &amp;<span class="keyword">mut</span> x;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Rust 规定：<strong>同一时间只能有一个人动这个东西（可变引用只能有一个）</strong>，除非前一个已经不用了。</p>
<p>下面代码会报错</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = &amp;<span class="keyword">mut</span> x;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);  <span class="comment">// 第一次使用 a ✅</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = &amp;<span class="keyword">mut</span> x;      <span class="comment">// ❌ a 还没“死”，不能创建 b</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, b);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, a);   <span class="comment">// 第二次使用 a（让它保持“活着”）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Rust 中，变量的“活跃范围”（也叫“活跃生命周期”）不是你创建它的地方决定的，而是你“最后一次使用它”的位置决定的。</p>
<p>解释</p>
<ol>
<li>Rust 不会因为你用了一次变量就认为它“用完了”。只要你后面还打算用它（比如打印它、传给函数等），Rust 就认为这个变量还“活着”。** **</li>
</ol>
<h5 id="可变引用与不可变引用不能同时存在"><a href="#可变引用与不可变引用不能同时存在" class="headerlink" title="可变引用与不可变引用不能同时存在"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/borrowing.html#%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8%E4%B8%8E%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8%E4%B8%8D%E8%83%BD%E5%90%8C%E6%97%B6%E5%AD%98%E5%9C%A8"><font style="color:rgb(0, 0, 0);">可变引用与不可变引用不能同时存在</font></a></h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r1</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r2</span> = &amp;s; <span class="comment">// 没问题</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r3</span> = &amp;<span class="keyword">mut</span> s; <span class="comment">// 大问题</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, and &#123;&#125;&quot;</span>, r1, r2, r3);</span><br></pre></td></tr></table></figure>

<p><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);">注意，引用 </font><code>r1</code>,<code>r2</code>,<code>r3</code><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);"> 的作用域从创建开始，一直持续到它最后一次使用的地方 </font><code>println!(....)</code><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);">，这个跟变量的作用域有所不同，变量的作用域从创建持续到某一个花括号 </font></p>
<h5 id="悬垂引用"><a href="#悬垂引用" class="headerlink" title="悬垂引用"></a><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">悬垂引用</font></h5><p>悬垂引用就是：你引用了一个已经被释放掉的东西，这时候引用还在，但指向的内存已经没了，结果就变成“悬空”的，危险！</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">reference_to_nothing</span> = <span class="title function_ invoke__">dangle</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">dangle</span>() <span class="punctuation">-&gt;</span> &amp;<span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &amp;s</span><br><span class="line">&#125; <span class="comment">// s在这里会被drop</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>概念</th>
<th>生命周期由谁决定？</th>
</tr>
</thead>
<tbody><tr>
<td>普通变量（如 <code>s</code>）</td>
<td>所在代码块 <code>&#123;&#125;</code> 的作用域</td>
</tr>
<tr>
<td>引用（如 <code>&amp;s</code>）</td>
<td>从创建引用那一刻，到最后一次使用为止</td>
</tr>
</tbody></table>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li><font style="color:rgb(0, 0, 0);">同一时刻，你只能拥有要么一个可变引用，要么任意多个不可变引用</font></li>
<li><font style="color:rgb(0, 0, 0);">引用必须总是有效的</font></li>
</ul>
<h3 id="ref-和-区别"><a href="#ref-和-区别" class="headerlink" title="ref 和&amp;区别"></a>ref 和&amp;区别</h3><table>
<thead>
<tr>
<th>用法</th>
<th>出现在</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>&amp;</code></td>
<td><strong>右侧表达式</strong></td>
<td>显式创建一个引用（borrow）</td>
</tr>
<tr>
<td><code>ref</code></td>
<td><strong>模式匹配中</strong></td>
<td>在解构时生成引用变量</td>
</tr>
</tbody></table>
<h4 id="是“借用”运算符"><a href="#是“借用”运算符" class="headerlink" title="&amp; 是“借用”运算符"></a><code>&amp;</code> 是“借用”运算符</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = &amp;x;  <span class="comment">// y 是 &amp;i32</span></span><br></pre></td></tr></table></figure>

<p>等价于：</p>
<p>“把 <code>x</code> 借给 <code>y</code>，<code>y</code> 拥有对 <code>x</code> 的只读访问权限。”</p>
<h4 id="ref-是“绑定为引用”（左侧用）"><a href="#ref-是“绑定为引用”（左侧用）" class="headerlink" title="ref 是“绑定为引用”（左侧用）"></a><code>ref</code> 是“绑定为引用”（左侧用）</h4><p>在<strong>模式匹配</strong>时，Rust 默认是移动（move）值。如果你想绑定变量为“引用”，就需要加 <code>ref</code>。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">ref</span> y = x;  <span class="comment">// y 是 &amp;String，不发生所有权移动</span></span><br></pre></td></tr></table></figure>

<p>等价于:</p>
<p>let y &#x3D; &x;</p>
<h5 id="更常见的：结构解构时使用-ref"><a href="#更常见的：结构解构时使用-ref" class="headerlink" title="更常见的：结构解构时使用 ref"></a>更常见的：结构解构时使用 <code>ref</code></h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">tup</span> = (<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hi&quot;</span>), <span class="number">42</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拆解并借用里面的值（否则会 move）</span></span><br><span class="line"><span class="keyword">let</span> (<span class="keyword">ref</span> a, <span class="keyword">ref</span> b) = tup;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a 是 &amp;String，b 是 &amp;i32</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 &amp;：右侧表达式中创建引用</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = &amp;s;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a: &#123;&#125;&quot;</span>, a);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 ref：在模式匹配中创建引用</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">ref</span> b = s;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;b: &#123;&#125;&quot;</span>, b);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 解构元组时使用 ref</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pair</span> = (<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hi&quot;</span>), <span class="number">123</span>);</span><br><span class="line">    <span class="keyword">let</span> (<span class="keyword">ref</span> x, <span class="keyword">ref</span> y) = pair;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;x: &#123;&#125;, y: &#123;&#125;&quot;</span>, x, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h4><ul>
<li>用 <code>&amp;</code> 是 “我要借用”</li>
<li>用 <code>ref</code> 是 “匹配时绑定为引用”</li>
<li>用 <code>ref mut</code> 是 “匹配时绑定为<strong>可变引用</strong>”</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/23/%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E5%80%9F%E7%94%A8/" data-id="cmconx2qk000eicqwct237su3" data-title="所有权和借用" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-基础类型" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/22/%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B/" class="article-date">
  <time class="dt-published" datetime="2025-06-22T04:40:14.000Z" itemprop="datePublished">2025-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/22/%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B/">基础类型</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>默认类型</th>
</tr>
</thead>
<tbody><tr>
<td>整数</td>
<td><code>i32</code> ✅</td>
</tr>
<tr>
<td>浮点</td>
<td><code>f64</code> ✅</td>
</tr>
</tbody></table>
<h4 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h4><ul>
<li><font style="color:rgb(0, 0, 0);">数值类型：</font><ul>
<li><font style="color:rgb(0, 0, 0);">有符号整数 (</font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">i8</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">i16</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">i32</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">i64</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">isize</font><font style="color:rgb(0, 0, 0);">)</font></li>
<li><font style="color:rgb(0, 0, 0);"> 无符号整数 (</font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">u8</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">u16</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">u32</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">u64</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">usize</font><font style="color:rgb(0, 0, 0);">) 、浮点数 (</font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">f32</font><font style="color:rgb(0, 0, 0);">, </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">f64</font><font style="color:rgb(0, 0, 0);">)、以及有理数、复数</font></li>
</ul>
</li>
<li>有符号和无符号区别<ul>
<li><strong><font style="color:rgb(0, 0, 0);">有符号</font></strong><font style="color:rgb(0, 0, 0);">则表示数字可以取正数、负数还有 0</font></li>
<li><strong><font style="color:rgb(0, 0, 0);">无符号数</font></strong><font style="color:rgb(0, 0, 0);">表示数字只能取正数和 0</font></li>
</ul>
</li>
</ul>
<h5 id="浮点类型"><a href="#浮点类型" class="headerlink" title="浮点类型"></a>浮点类型</h5><p> 浮点数字面量默认就是 f64 类型  </p>
<h5 id="Rang"><a href="#Rang" class="headerlink" title="Rang"></a>Rang</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">   <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">10</span>&#123;</span><br><span class="line">       <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,i);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="string">&#x27;a&#x27;</span>..=<span class="string">&#x27;z&#x27;</span>&#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,i);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Complex"><a href="#Complex" class="headerlink" title="Complex"></a>Complex</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Complex</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">pub</span> re: T,  <span class="comment">// 实部</span></span><br><span class="line">    <span class="keyword">pub</span> im: T,  <span class="comment">// 虚部</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> num::complex::Complex; <span class="comment">// 引入 num crate 中的 Complex 复数类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = Complex &#123; re: <span class="number">2.1</span>, im: -<span class="number">1.2</span> &#125;; <span class="comment">// 创建复数 a = 2.1 - 1.2i</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = Complex::<span class="title function_ invoke__">new</span>(<span class="number">11.1</span>, <span class="number">22.2</span>);      <span class="comment">// 创建复数 b = 11.1 + 22.2i</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = a + b;                   <span class="comment">// 复数相加：实部 + 实部，虚部 + 虚部</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; + &#123;&#125;i&quot;</span>, result.re, result.im); <span class="comment">// 打印结果复数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="怎么计算"><a href="#怎么计算" class="headerlink" title="怎么计算"></a>怎么计算</h6><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">2.1</span> - <span class="number">1.2</span>i</span><br><span class="line">b = <span class="number">11.1</span> + <span class="number">22.2</span>i</span><br><span class="line">result = (<span class="number">2.1</span> + <span class="number">11.1</span>) + (-<span class="number">1.2</span> + <span class="number">22.2</span>)i = <span class="number">13.2</span> + <span class="number">21.0</span>i</span><br></pre></td></tr></table></figure>

<h6 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h6><table>
<thead>
<tr>
<th>表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>Complex &#123; re: a, im: b &#125;</code></td>
<td>创建复数 <code>a + bi</code></td>
</tr>
<tr>
<td><code>Complex::new(a, b)</code></td>
<td>同上，更常用</td>
</tr>
<tr>
<td><code>a + b</code></td>
<td>复数相加</td>
</tr>
<tr>
<td><code>result.re</code></td>
<td>实部</td>
</tr>
<tr>
<td><code>result.im</code></td>
<td>虚部</td>
</tr>
</tbody></table>
<h4 id="字符、布尔、单元类型"><a href="#字符、布尔、单元类型" class="headerlink" title="字符、布尔、单元类型"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/char-bool.html#%E5%AD%97%E7%AC%A6%E5%B8%83%E5%B0%94%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B"><font style="color:rgb(0, 0, 0);">字符、布尔、单元类型</font></a></h4><h5 id="字符类型-char"><a href="#字符类型-char" class="headerlink" title="字符类型(char)"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/char-bool.html#%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8Bchar"><font style="color:rgb(0, 0, 0);">字符类型(char)</font></a></h5><p><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);">Rust 的字符只能用 </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">‘’</font><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);"> 来表示,占用4个字节， </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">“”</font><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);"> 是留给字符串的。</font></p>
<h5 id="Nan"><a href="#Nan" class="headerlink" title="Nan"></a><font style="color:rgb(0, 0, 0);background-color:rgb(241, 246, 249);">Nan</font></h5><p><code>**NaN**</code><strong>（Not a Number）</strong> 是一种特殊的浮点数值，表示<strong>某个运算结果不是一个合法的数字</strong>。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">v</span> = (-<span class="number">1.1f64</span>).<span class="title function_ invoke__">sqrt</span>();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, v);</span><br><span class="line">    <span class="keyword">if</span> v.<span class="title function_ invoke__">is_nan</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;sqrt(-1.1) is NaN&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>特性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>类型</td>
<td>只出现在 <code>f32</code> 和 <code>f64</code> 中</td>
</tr>
<tr>
<td>含义</td>
<td>表示 “不是数字” 的特殊浮点值</td>
</tr>
<tr>
<td>出现场景</td>
<td>0&#x2F;0、负数开方、无效浮点运算</td>
</tr>
<tr>
<td>判断方法</td>
<td><code>x.is_nan()</code></td>
</tr>
<tr>
<td>对比行为</td>
<td><code>NaN != NaN</code> 永远为 <code>true</code>（即它不等于任何东西）</td>
</tr>
</tbody></table>
<h5 id="布尔-bool"><a href="#布尔-bool" class="headerlink" title="布尔(bool)"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/char-bool.html#%E5%B8%83%E5%B0%94bool"><font style="color:rgb(0, 0, 0);">布尔(bool)</font></a></h5><p><font style="color:rgb(0, 0, 0);">Rust 中的布尔类型有两个可能的值：</font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">true</font><font style="color:rgb(0, 0, 0);"> 和 </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">false</font><font style="color:rgb(0, 0, 0);">，布尔值占用内存的大小为 </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">1</font><font style="color:rgb(0, 0, 0);"> 个字节</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">f</span>: <span class="type">bool</span> = <span class="literal">false</span>; <span class="comment">// 使用类型标注,显式指定f的类型</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> f &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;这是段毫无意义的代码&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="单元类型-unit"><a href="#单元类型-unit" class="headerlink" title="单元类型(unit)"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/char-bool.html#%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8Bunit"><font style="color:rgb(0, 0, 0);">单元类型(unit)</font></a></h5><p><font style="color:rgb(0, 0, 0);">单元类型就是 </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">()</font></p>
<ol>
<li><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">main</font><font style="color:rgb(0, 0, 0);"> 函数就返回这个单元类型 </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">()</font></li>
<li><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">println!()</font><font style="color:rgb(0, 0, 0);"> 的返回值也是单元类型 </font><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">()</font></li>
</ol>
<p><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);"></font></p>
<h4 id="序列"><a href="#序列" class="headerlink" title="序列"></a><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">序列</font></h4><h4 id="类型强转"><a href="#类型强转" class="headerlink" title="类型强转"></a>类型强转</h4><p> 类型强转（type casting）是<strong>把一种类型的数据强制转换为另一种类型</strong>，通常使用 <code>as</code> 关键字完成。  </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span>: <span class="type">u8</span> = <span class="number">255</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = x <span class="keyword">as</span> <span class="type">u16</span>;   <span class="comment">// u8 -&gt; u16</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">z</span> = x <span class="keyword">as</span> <span class="type">i32</span>;   <span class="comment">// u8 -&gt; i32</span></span><br></pre></td></tr></table></figure>

<h4 id="语句与表达式"><a href="#语句与表达式" class="headerlink" title="语句与表达式"></a><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">语句与表达式</font></h4><p><font style="color:rgb(0, 0, 0);">Rust 的函数体是由一系列语句组成，最后由一个表达式来返回值，例如</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add_with_extra</span>(x: <span class="type">i32</span>, y: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = x + <span class="number">1</span>; <span class="comment">// 语句</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = y + <span class="number">5</span>; <span class="comment">// 语句</span></span><br><span class="line">    x + y <span class="comment">// 表达式</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 由于 let 是语句，因此不能将 let 语句赋值给其它值，如下形式是错误的</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = (<span class="keyword">let</span> <span class="variable">a</span> = <span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<p><strong><font style="color:rgb(0, 0, 0);">表达式不能包含分号</font></strong><font style="color:rgb(0, 0, 0);">。这一点非常重要，一旦你在表达式后加上分号，它就会变成一条语句，再也</font><strong><font style="color:rgb(0, 0, 0);">不会</font></strong><font style="color:rgb(0, 0, 0);">返回一个值</font></p>
<p><font style="color:rgb(0, 0, 0);">表达式如果不返回任何值，会隐式地返回一个 </font><a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/char-bool.html#%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B"><font style="color:rgb(32, 96, 159);">()</font></a></p>
<h5 id="举例"><a href="#举例" class="headerlink" title="举例"></a><font style="color:rgb(32, 96, 159);">举例</font></h5><p><font style="color:rgb(32, 96, 159);">x+&#x3D;2 是语句,不是表达式 v会返回()</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">     <span class="keyword">let</span> <span class="variable">v</span> = &#123;</span><br><span class="line">       <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="number">1</span>;</span><br><span class="line">       x += <span class="number">2</span></span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, v);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><font style="color:rgb(32, 96, 159);">这样x会返回3</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">     <span class="keyword">let</span> <span class="variable">v</span> = &#123;</span><br><span class="line">       <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="number">1</span>;</span><br><span class="line">       x += <span class="number">2</span>;x</span><br><span class="line">   &#125;;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(v, <span class="number">3</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="常见格式化符号汇总"><a href="#常见格式化符号汇总" class="headerlink" title="常见格式化符号汇总"></a>常见格式化符号汇总</h3><table>
<thead>
<tr>
<th>占位符</th>
<th>含义</th>
<th>示例输出</th>
</tr>
</thead>
<tbody><tr>
<td><code>&#123;&#125;</code></td>
<td>默认格式（Display）</td>
<td><code>123</code>, <code>&quot;abc&quot;</code></td>
</tr>
<tr>
<td><code>&#123;:?&#125;</code></td>
<td>Debug 格式</td>
<td><code>[1, 2, 3]</code>, <code>MyStruct &#123;..&#125;</code></td>
</tr>
<tr>
<td><code>&#123;:#?&#125;</code></td>
<td>Pretty Debug（换行）</td>
<td>多行更易读的调试输出</td>
</tr>
<tr>
<td><code>&#123;:x&#125;</code></td>
<td>十六进制（小写）</td>
<td><code>ff</code></td>
</tr>
<tr>
<td><code>&#123;:X&#125;</code></td>
<td>十六进制（大写）</td>
<td><code>FF</code></td>
</tr>
<tr>
<td><code>&#123;:b&#125;</code></td>
<td>二进制</td>
<td><code>11111111</code></td>
</tr>
<tr>
<td><code>&#123;:o&#125;</code></td>
<td>八进制</td>
<td><code>377</code></td>
</tr>
<tr>
<td><code>&#123;:p&#125;</code></td>
<td>指针地址</td>
<td><code>0x7ffeeafd8a30</code>（仅指针）</td>
</tr>
<tr>
<td><code>&#123;:e&#125;</code></td>
<td>科学计数法（小写）</td>
<td><code>1.23e4</code></td>
</tr>
<tr>
<td><code>&#123;:E&#125;</code></td>
<td>科学计数法（大写）</td>
<td><code>1.23E4</code></td>
</tr>
<tr>
<td><code>&#123;:&gt;5&#125;</code></td>
<td>右对齐宽度为5</td>
<td><code>&#39;   42&#39;</code></td>
</tr>
<tr>
<td><code>&#123;:0&gt;5&#125;</code></td>
<td>填充0右对齐</td>
<td><code>&#39;00042&#39;</code></td>
</tr>
</tbody></table>
<h3 id="常用的浮点方法"><a href="#常用的浮点方法" class="headerlink" title="常用的浮点方法"></a>常用的浮点方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>含义</th>
<th>示例</th>
<th>输出</th>
</tr>
</thead>
<tbody><tr>
<td><code>.abs()</code></td>
<td>绝对值</td>
<td><code>(-3.5_f64).abs()</code></td>
<td><code>3.5</code></td>
</tr>
<tr>
<td><code>.ceil()</code></td>
<td>向上取整</td>
<td><code>2.3_f32.ceil()</code></td>
<td><code>3.0</code></td>
</tr>
<tr>
<td><code>.floor()</code></td>
<td>向下取整</td>
<td><code>2.9_f64.floor()</code></td>
<td><code>2.0</code></td>
</tr>
<tr>
<td><code>.round()</code></td>
<td>四舍五入</td>
<td><code>2.5_f32.round()</code></td>
<td><code>3.0</code></td>
</tr>
<tr>
<td><code>.trunc()</code></td>
<td>截断小数</td>
<td><code>2.9_f64.trunc()</code></td>
<td><code>2.0</code></td>
</tr>
<tr>
<td><code>.fract()</code></td>
<td>小数部分</td>
<td><code>3.1415_f64.fract()</code></td>
<td><code>0.1415</code></td>
</tr>
<tr>
<td><code>.sqrt()</code></td>
<td>平方根</td>
<td><code>9.0_f64.sqrt()</code></td>
<td><code>3.0</code></td>
</tr>
<tr>
<td><code>.powi(n)</code></td>
<td>整数次方</td>
<td><code>2.0_f32.powi(3)</code></td>
<td><code>8.0</code></td>
</tr>
<tr>
<td><code>.powf(x)</code></td>
<td>浮点次方</td>
<td><code>4.0_f64.powf(0.5)</code></td>
<td><code>2.0</code></td>
</tr>
<tr>
<td><code>.sin()</code> &#x2F; <code>.cos()</code></td>
<td>三角函数</td>
<td><code>std::f64::consts::PI.sin()</code></td>
<td><code>≈ 0.0</code></td>
</tr>
<tr>
<td><code>.ln()</code></td>
<td>自然对数</td>
<td><code>2.71828_f64.ln()</code></td>
<td><code>≈ 1.0</code></td>
</tr>
<tr>
<td><code>.log(base)</code></td>
<td>任意底对数</td>
<td><code>100.0_f64.log(10.0)</code></td>
<td><code>2.0</code></td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/22/%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B/" data-id="cmconx2qh0009icqw60gk3lfo" data-title="基础类型" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-流程控制" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/20/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" class="article-date">
  <time class="dt-published" datetime="2025-06-20T08:44:40.000Z" itemprop="datePublished">2025-06-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/20/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">流程控制</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="if-来做分支控制"><a href="#if-来做分支控制" class="headerlink" title="if 来做分支控制"></a>if 来做分支控制</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition == <span class="literal">true</span> &#123;</span><br><span class="line">    <span class="comment">// A...</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// B...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="else-if-处理多重条件"><a href="#else-if-处理多重条件" class="headerlink" title="else if 处理多重条件"></a>else if 处理多重条件</h4><p><font style="color:rgb(0, 0, 0);">有多个分支能匹配，只有第一个匹配的分支会被执行</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n</span> = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> n % <span class="number">4</span> == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is divisible by 4&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> n % <span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is divisible by 3&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is divisible by 2&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is not divisible by 4, 3, or 2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="循环控制"><a href="#循环控制" class="headerlink" title="循环控制"></a>循环控制</h4><p><font style="color:rgb(0, 0, 0);">在 Rust 语言中有三种循环方式：</font><code>for</code><font style="color:rgb(0, 0, 0);">、</font><code>while</code><font style="color:rgb(0, 0, 0);"> 和 </font><code>loop</code></p>
<h5 id="for"><a href="#for" class="headerlink" title="for"></a><font style="color:rgb(48, 25, 0);background-color:rgb(246, 247, 246);">for</font></h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 元素 <span class="keyword">in</span> 集合 &#123;</span><br><span class="line">  <span class="comment">// 使用元素干一些你懂我不懂的事情</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过索引和值的方式迭代数组</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过索引和值的方式迭代数组 `a`</span></span><br><span class="line">    <span class="keyword">for</span> (i,v) <span class="keyword">in</span> a.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">enumerate</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;第&#123;&#125;个元素是&#123;&#125;&quot;</span>,i+<span class="number">1</span>,v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="while"><a href="#while" class="headerlink" title="while"></a>while</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">n</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> n &lt;= <span class="number">5</span>  &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;!&quot;</span>, n);</span><br><span class="line"></span><br><span class="line">        n = n + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;我出来了！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">n</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> n &gt; <span class="number">5</span> &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, n);</span><br><span class="line">        n+=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;我出来了！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font style="color:rgb(0, 0, 0);">使用 </font><code>loop</code><font style="color:rgb(0, 0, 0);"> 时，必不可少的伙伴是 </font><code>break</code><font style="color:rgb(0, 0, 0);"> 关键字，它能让循环在满足某个条件时跳出</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">count</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">number</span> = <span class="keyword">loop</span> &#123;</span><br><span class="line">        count +=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> count == <span class="number">10</span> &#123;</span><br><span class="line">            <span class="keyword">break</span> count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The number is &#123;&#125;&quot;</span>, number)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="循环标签：在多个循环之间消除歧义"><a href="#循环标签：在多个循环之间消除歧义" class="headerlink" title="循环标签：在多个循环之间消除歧义"></a>循环标签：在多个循环之间消除歧义</h6><p><code>break</code> 将只退出内层循环。<code>break &#39;counting_up;</code> 语句将退出外层循环</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">count</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="symbol">&#x27;counting_up</span>: <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;count = &#123;count&#125;&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">remaining</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">loop</span> &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;remaining = &#123;remaining&#125;&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> remaining == <span class="number">9</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> count == <span class="number">2</span> &#123;</span><br><span class="line">                <span class="keyword">break</span> <span class="symbol">&#x27;counting_up</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            remaining -= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        count += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;End count = &#123;count&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="continue"><a href="#continue" class="headerlink" title="continue"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/flow-control.html#continue"><font style="color:rgb(0, 0, 0);">continue</font></a></h5><p>跳过当前的循环</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">4</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="break"><a href="#break" class="headerlink" title="break"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/flow-control.html#break"><font style="color:rgb(0, 0, 0);">break</font></a></h5><p>跳过整个循环</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">4</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/20/%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/" data-id="cmconx2qn000qicqw6q8ial0t" data-title="流程控制" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/20/%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2025-06-20T01:06:09.000Z" itemprop="datePublished">2025-06-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/20/%E5%87%BD%E6%95%B0/">函数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="函数的返回"><a href="#函数的返回" class="headerlink" title="函数的返回"></a>函数的返回</h3><ul>
<li>return + 分号</li>
<li>没有 return + 没有分号</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>(i: <span class="type">i32</span>, j: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">   i + j</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="无返回值"><a href="#无返回值" class="headerlink" title="无返回值"></a>无返回值</h4><p>如果一个函数没有返回值，那么就返回<code>()</code></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">print</span>(i: <span class="type">i32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">print</span>(i: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> () &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="函数要点"><a href="#函数要点" class="headerlink" title="函数要点"></a>函数要点</h3><ul>
<li><font style="color:rgb(0, 0, 0);">函数名和变量名使用</font><a target="_blank" rel="noopener" href="https://course.rs/practice/naming.html"><font style="color:rgb(32, 96, 159);">蛇形命名法(snake case)</font></a><font style="color:rgb(0, 0, 0);">，例如 </font><code>fn add_two() &#123;&#125;</code></li>
<li><font style="color:rgb(0, 0, 0);">函数的位置可以随便放，Rust 不关心我们在哪里定义了函数，只要有定义即可</font></li>
<li><font style="color:#DF2A3F;">每个函数参数都需要标注类型</font></li>
</ul>
<p><font style="color:rgb(0, 0, 0);">当用 </font><code>!</code><font style="color:rgb(0, 0, 0);"> 作函数返回类型的时候，表示该函数永不返回( diverging functions )，特别的，这种语法往往用做会导致程序崩溃的函数</font></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">forever</span>() <span class="punctuation">-&gt;</span> ! &#123;</span><br><span class="line">  <span class="keyword">loop</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">dead_end</span>() <span class="punctuation">-&gt;</span> ! &#123;</span><br><span class="line">  <span class="built_in">panic!</span>(<span class="string">&quot;你已经到了穷途末路，崩溃吧！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/20/%E5%87%BD%E6%95%B0/" data-id="cmconx2qf0004icqw3lgcddqy" data-title="函数" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/19/hello-world/" class="article-date">
  <time class="dt-published" datetime="2025-06-19T12:38:04.927Z" itemprop="datePublished">2025-06-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/19/hello-world/">hexo</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/19/hello-world/" data-id="cmconx2qd0002icqw7ji34ima" data-title="hexo" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-变量" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/19/%E5%8F%98%E9%87%8F/" class="article-date">
  <time class="dt-published" datetime="2025-06-19T12:37:27.000Z" itemprop="datePublished">2025-06-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/19/%E5%8F%98%E9%87%8F/">变量</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="let"><a href="#let" class="headerlink" title="let"></a>let</h4><p><code>let</code> 是 Rust中用来 <strong>绑定变量（声明 + 赋值）</strong> 的关键字 是不可变的,如下代码运行会报错</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">    x = <span class="number">6</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>变量定义顺序</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> 变量名: 类型 = 值;</span><br></pre></td></tr></table></figure>

<h4 id="mut"><a href="#mut" class="headerlink" title="mut"></a>mut</h4><p><code>mut</code><font style="color:rgb(0, 0, 0);">关键字让变量变为</font><strong><font style="color:rgb(0, 0, 0);">可变的</font></strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">    x = <span class="number">6</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="常量（const）"><a href="#常量（const）" class="headerlink" title="常量（const）"></a>常量（const）</h4><p>常量</p>
<ol>
<li>编译时确定值</li>
<li>必须声明类型</li>
<li>必须大写</li>
<li>编译时被内联，静态变量不会，整个程序中静态变量只有一个实例，引用指向地址值</li>
</ol>
<p>不可变变量</p>
<ol>
<li>运行时才能确定值</li>
<li>不可变变量不需要声明类型</li>
<li>不可变变量不需要大写</li>
</ol>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> NUM:<span class="type">i32</span> = <span class="number">10</span>；</span><br></pre></td></tr></table></figure>

<h4 id="静态变量（static）"><a href="#静态变量（static）" class="headerlink" title="静态变量（static）"></a>静态变量（static）</h4><ol>
<li>整个程序中共享</li>
<li>默认不可改变</li>
<li>大写</li>
<li>需要声明mut关键之,可以改变</li>
</ol>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> NUM:<span class="type">i32</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h4 id="使用下划线开头忽略未使用的变量"><a href="#使用下划线开头忽略未使用的变量" class="headerlink" title="使用下划线开头忽略未使用的变量"></a><a target="_blank" rel="noopener" href="https://course.rs/basic/variable.html#%E4%BD%BF%E7%94%A8%E4%B8%8B%E5%88%92%E7%BA%BF%E5%BC%80%E5%A4%B4%E5%BF%BD%E7%95%A5%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F"><font style="color:rgb(0, 0, 0);">使用下划线开头忽略未使用的变量</font></a></h4><p>x和y都是未使用到变量,<strong><font style="color:rgb(0, 0, 0);">希望告诉 Rust 不要警告未使用的变量，为此可以用下划线作为变量名的开头</font></strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">_x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="作用域和遮蔽"><a href="#作用域和遮蔽" class="headerlink" title="作用域和遮蔽"></a>作用域和遮蔽</h4><p> Rust 允许 <strong>在同一个作用域中用 <strong><code>**let**</code></strong> 重复定义变量名</strong>这叫：🎯** Shadowing（遮蔽）**</p>
<table>
<thead>
<tr>
<th>特性</th>
<th>变量遮蔽 (<code>let a = ...</code>)</th>
<th>可变变量 (<code>let mut a = ...</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>是否修改原变量</td>
<td>❌ 否，是创建新变量</td>
<td>✅ 是，修改原来的值</td>
</tr>
<tr>
<td>是否能改变类型</td>
<td>✅ 是</td>
<td>❌ 否，类型一旦声明不能改</td>
</tr>
<tr>
<td>是否能改变可变性</td>
<td>✅ 是，可以从不可变变成可变</td>
<td>❌ 否，只决定原变量是否能改</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/19/%E5%8F%98%E9%87%8F/" data-id="cmconx2qg0006icqwe363679u" data-title="变量" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Rust入门之环境搭建" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/06/18/Rust%E5%85%A5%E9%97%A8%E4%B9%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" class="article-date">
  <time class="dt-published" datetime="2025-06-18T13:16:56.000Z" itemprop="datePublished">2025-06-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/06/18/Rust%E5%85%A5%E9%97%A8%E4%B9%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">Rust入门之环境搭建</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="Rust-安装"><a href="#Rust-安装" class="headerlink" title="Rust 安装"></a><font style="color:rgb(79, 79, 79);">Rust 安装</font></h3><h4 id="安装链接"><a href="#安装链接" class="headerlink" title="安装链接"></a>安装链接</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf https://sh.rustup.rs | sh</span><br></pre></td></tr></table></figure>

<h4 id="构建报错"><a href="#构建报错" class="headerlink" title="构建报错"></a>构建报错</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lsy@DESKTOP-GIELOCC:~/hello_rust$ cargo run</span><br><span class="line">Compiling hello_rust v0.<span class="number">1.0</span> (/home/lsy/hello_rust)</span><br><span class="line">error: linker `cc` not found</span><br><span class="line">|</span><br><span class="line">= note: No such file or <span class="title function_ invoke__">directory</span> (os error <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新软件包列表</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装构建工具</span></span><br><span class="line"><span class="built_in">sudo</span> apt install build-essential</span><br></pre></td></tr></table></figure>

<h4 id="安装成功"><a href="#安装成功" class="headerlink" title="安装成功"></a>安装成功</h4><p>输入命令，打印出版本号安装成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustc --version</span><br></pre></td></tr></table></figure>

<h4 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup update</span><br></pre></td></tr></table></figure>

<h4 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustup self uninstall</span><br></pre></td></tr></table></figure>

<h3 id="vscode-插件"><a href="#vscode-插件" class="headerlink" title="vscode 插件"></a>vscode 插件</h3><ol>
<li><font style="color:rgb(77, 77, 77);">Rust Analyzer</font></li>
<li><font style="color:rgb(77, 77, 77);">CodeLLDB </font></li>
<li><font style="color:rgb(77, 77, 77);">Even Better Toml</font></li>
<li><font style="color:rgb(77, 77, 77);">crates 已废弃改用</font><font style="color:#DF2A3F;">Dependi</font></li>
</ol>
<h3 id="编译-rs-文件"><a href="#编译-rs-文件" class="headerlink" title="编译 rs 文件"></a>编译 rs 文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rustc main.rs</span><br></pre></td></tr></table></figure>

<h3 id="cargo"><a href="#cargo" class="headerlink" title="cargo"></a>cargo</h3><h4 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo new xxx</span><br></pre></td></tr></table></figure>

<h4 id="构建"><a href="#构建" class="headerlink" title="构建"></a>构建</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo build</span><br></pre></td></tr></table></figure>

<h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo run</span><br></pre></td></tr></table></figure>

<h4 id="配置国内镜像"><a href="#配置国内镜像" class="headerlink" title="配置国内镜像"></a>配置国内镜像</h4><h5 id="查看-cargo-所在文件"><a href="#查看-cargo-所在文件" class="headerlink" title="查看 cargo 所在文件"></a>查看 cargo 所在文件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -la ~/.cargo/</span><br></pre></td></tr></table></figure>

<h5 id="创建-config-toml"><a href="#创建-config-toml" class="headerlink" title="创建 config.toml"></a>创建 config.toml</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch ~/.cargo/config.toml</span><br></pre></td></tr></table></figure>

<h5 id="覆盖默认的镜像地址"><a href="#覆盖默认的镜像地址" class="headerlink" title="覆盖默认的镜像地址"></a>覆盖默认的镜像地址</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[source.crates-io]</span><br><span class="line">replace-with = &#x27;ustc&#x27;</span><br><span class="line"></span><br><span class="line">[source.ustc]</span><br><span class="line">registry = &quot;git://mirrors.ustc.edu.cn/crates.io-index&quot;</span><br></pre></td></tr></table></figure>

<p>cargo build 重新构建</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/06/18/Rust%E5%85%A5%E9%97%A8%E4%B9%8B%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" data-id="cmconx2qb0001icqw130phtfn" data-title="Rust入门之环境搭建" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rust/" rel="tag">Rust</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Rust/" style="font-size: 20px;">Rust</a> <a href="/tags/%E5%85%B6%E4%BB%96/" style="font-size: 10px;">其他</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">July 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">June 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/07/04/%E5%8C%85%E5%92%8C%E6%A8%A1%E5%9D%97/">包和模块</a>
          </li>
        
          <li>
            <a href="/2025/07/03/%E8%BF%94%E5%9B%9E%E5%80%BC%E5%92%8C%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/">返回值和错误处理</a>
          </li>
        
          <li>
            <a href="/2025/07/02/%E9%9B%86%E5%90%88/">集合</a>
          </li>
        
          <li>
            <a href="/2025/07/01/%E7%89%B9%E5%BE%81/">特征</a>
          </li>
        
          <li>
            <a href="/2025/06/30/%E6%B3%9B%E5%9E%8B/">泛型</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>